<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.11/themes/css/cartodb.css" />
        <link rel='stylesheet' href='/src/stylesheets/raleway.css'>
        <link rel="stylesheet" href="/src/stylesheets/bootstrap.min.css">
        <link rel="stylesheet" href="/src/stylesheets/style.css">
        <link rel="stylesheet" href="http://rawgit.com/LearnBoost/antiscroll/master/antiscroll.css">
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/normalize/2.1.0/normalize.css">
        <link rel="stylesheet" href="http://rawgit.com/Addepar/ember-table/v0.2.0/dist/ember-table.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <script type='text/x-handlebars' data-template-name='_side-navigation'>
            <div class='side-navigation'>
                <ul>
                    <li>
                        {{#link-to 'organizations'}}
                            <i class="fa fa-home fa-lg"></i>
                        {{/link-to}}
                    </li>
                    <li>
                        {{#link-to 'organization' model.organizationSlug }}
                            <i class="fa fa-list fa-lg"></i>
                        {{/link-to}}
                    </li>
                    <li>
                        {{#link-to 'map' model.slug}}
                            <i class="fa fa-map-marker fa-lg"></i>
                        {{/link-to}}
                    </li>
                    <li>
                        {{#link-to 'charts' model.slug}}
                            <i class="fa fa-bar-chart fa-lg"></i>
                        {{/link-to}}
                    </li>
                    <li>
                        {{#link-to 'table' model.slug}}
                            <i class="fa fa-table fa-lg"></i>
                        {{/link-to}}
                    </li>
                </ul>
            </div>
        </script>

        <script type='text/x-handlebars' data-template-name='organizations'>
            <div class='container'>
                <div class='row'>
                    <div class='col-lg-6 col-lg-offset-3'>
                        <div>
                            <h2>Organizations</h2>
                            <p>Choose an organization</p>
                            <ul>
                                {{#each organization in content}}
                                    <li>
                                        {{#link-to 'organization' organization.slug }}
                                            {{ organization.name }}
                                        {{/link-to}}
                                    </li>
                                {{/each}}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </script>

        <script type='text/x-handlebars' data-template-name='map'>
            {{partial "side-navigation"}}
            <div class='container' id='viewport'>

                <div id='description' class='row'>
                    <div class='col-lg-12'>
                        <h3>FAO Beneficiary Registration</h3>
                        <p>This data represents beneficiaries registered by FAO.</p>
                    </div>
                </div>
                <div class='row'>
                    <div id='content' class='col-lg-12' {{bind-attr data-viz-id=model.cartoVisualizationID}}>
                    </div>
                </div>
                <script>
                    var cartoVisualizationID = $('#content').attr('data-viz-id');
                    var cartoURL = 'http://okal.cartodb.com/api/v2/viz/' + cartoVisualizationID + '/viz.json'
                    cartodb.createVis('content', cartoURL);
                </script>
            </div>
        </script>

        <script type='text/x-handlebars' data-template-name='organization'>
            <div class='container'>
                <div class='row'>
                    <div class='col-lg-6 col-lg-offset-3'>
                        <div>
                            <h2>{{ organization.name }}</h2>
                            <p>Choose a dataset to visualize</p>
                            <ul>
                                {{#each dataset in content.datasets}}
                                    <li>
                                        {{#link-to 'table' dataset.slug}}
                                            {{ dataset.name }}
                                        {{/link-to}}
                                    </li>
                                {{/each}}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </script>

        <script type='text/x-handlebars' data-template-name='table'>
            {{partial "side-navigation"}}
            <div class='container' id='viewport'>
                <div id='description' class='row'>
                    <div class='col-lg-12'>
                        <h3>{{model.name}}</h3>
                    </div>
                </div>
                <div class='row'>
                    <div id='content' class='col-lg-12'>
                        <div class='table-container'>
                            {{table-component
                                numFixedColumns=0
                                hasFooter=false
                                columnsBinding='columns'
                                contentBinding='model.rawData'}}
                        </div>
                    </div>
                </div>
            </div>
        </script>

        <script type='text/x-handlebars' data-template-name='charts'>
            <div class='container'>
                <div class='row'>
                    <div class='col-lg-6 col-lg-offset-3'>
                        <div>
                            <h2>{{ organization.name }}</h2>
                            <p>Choose a dataset to visualize</p>
                            <ul>
                                {{#each visualizationDefinition in visualizationDefinitions}}
                                {{/each}}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </script>
    </head>
    <body>
        <script src='http://libs.cartocdn.com/cartodb.js/v3/3.11/cartodb.js'></script>
        <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
        <script src="/src/javascript/libs/jquery-1.11.2.min.js"></script>
        <script src="/src/javascript/libs/handlebars-v1.3.0.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.2/jquery-ui.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.6/jquery.mousewheel.js"></script>
        <script src="http://rawgit.com/LearnBoost/antiscroll/master/antiscroll.js"></script>
        <script src="http://builds.emberjs.com/tags/v1.4.0/ember.js"></script>
        <script src="http://rawgit.com/Addepar/ember-table/v0.4.0/dependencies/ember-addepar-mixins/resize_handler.js"></script>
        <script src="http://rawgit.com/Addepar/ember-table/v0.4.0/dependencies/ember-addepar-mixins/style_bindings.js"></script>
        <script src="http://rawgit.com/Addepar/ember-table/v0.4.0/dist/ember-table.js"></script>
        <script src="/src/javascript/application.js"></script>
        <script src="/src/javascript/controllers/organization.js"></script>
        <script src="/src/javascript/controllers/table.js"></script>
        <script src="/src/javascript/router.js"></script>
    </body>
</html>
